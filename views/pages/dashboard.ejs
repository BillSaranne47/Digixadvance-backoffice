<div class="container">
  <div class="page-inner p-0">
    <div class="mb-5">
      <% if (bank && bank.name) { %>
      <h6 class="op-7 fs-5 mt--2"><%= bank.name %></h6>
      <% } %>
      <h3 class="fw-bold fs-1">
        <%= __('welcome_back') %>, <strong><%= user.username %></strong>
        <!-- <% if (bank && bank.name) { %>
          from <span class="text-primary"><%= bank.name %></span>
        <% } %> -->
      </h3>
      <h6 class="op-7 fs-5 mt--2"><%= __('quick_overview') %></h6>
    </div>

    <% const isAdminUser = !user.bank_id; %>

    <% if (isAdminUser) { %>
    <!-- Admin Dashboard Stats -->
    <div class="row">
      <!-- Registered Banks -->
      <div class="col-sm-6 col-md-3">
        <div class="card card-stats card-round">
          <div class="card-body">
            <div class="row align-items-center">
              <div class="col-icon">
                <div class="icon-big text-center icon-info bubble-shadow-small">
                  <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icon-tabler-building-bank">
                    <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                    <path d="M3 21l18 0" />
                    <path d="M3 10l18 0" />
                    <path d="M5 6l7 -3l7 3" />
                    <path d="M4 10l0 11" />
                    <path d="M20 10l0 11" />
                    <path d="M8 14l0 3" />
                    <path d="M12 14l0 3" />
                    <path d="M16 14l0 3" />
                  </svg>
                </div>
              </div>
              <div class="col col-stats ms-3 ms-sm-0">
                <div class="numbers">
                  <p class="card-category"><%= __('registered_banks') %></p>
                  <h4 class="card-title"><%= sumofbanks ?? 0 %></h4>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Total Clients -->
      <div class="col-sm-6 col-md-3">
        <div class="card card-stats card-round">
          <div class="card-body">
            <div class="row align-items-center">
              <div class="col-icon">
                <div class="icon-big text-center icon-success bubble-shadow-small">
                  <i class="fas fa-user-friends"></i>
                </div>
              </div>
              <div class="col col-stats ms-3 ms-sm-0">
                <div class="numbers">
                  <p class="card-category"><%= __('total_clients') %></p>
                  <h4 class="card-title"><%= totalClients ?? 0 %></h4>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Total Users -->
      <div class="col-sm-6 col-md-3">
        <div class="card card-stats card-round">
          <div class="card-body">
            <div class="row align-items-center">
              <div class="col-icon">
                <div class="icon-big text-center icon-secondary bubble-shadow-small">
                  <i class="fas fa-user-shield"></i>
                </div>
              </div>
              <div class="col col-stats ms-3 ms-sm-0">
                <div class="numbers">
                  <p class="card-category"><%= __('total_users') %></p>
                  <h4 class="card-title"><%= totalUsers ?? 0  %></h4>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <% } else { %>
    <!-- Bank User Dashboard -->
    <div class="row">
      <!-- Available Balance -->
      <div class="col-sm-6 col-md-4">
        <div class="card card-stats card-round">
          <div class="card-body">
            <div class="row align-items-center">
              <div class="col-icon">
                <div class="icon-big text-center icon-info bubble-shadow-small">
                  <i class="fas fa-hand-holding-usd"></i>
                </div>
              </div>
              <div class="col col-stats ms-3 ms-sm-0">
                <div class="numbers">
                  <p class="card-category">Available Balance</p>
                  <h4 class="card-title">
                    <%= Number(bankInfo[0]?.available_balance ?? 0).toLocaleString('en-US') %> XAF
                  </h4>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Total Clients -->
      <div class="col-sm-6 col-md-3">
        <div class="card card-stats card-round">
          <div class="card-body">
            <div class="row align-items-center">
              <div class="col-icon">
                <div class="icon-big text-center icon-success bubble-shadow-small">
                  <i class="fas fa-user-friends"></i>
                </div>
              </div>
              <div class="col col-stats ms-3 ms-sm-0">
                <div class="numbers">
                  <p class="card-category"><%= __('total_clients') %></p>
                  <h4 class="card-title"><%= totalClients || 0 %></h4>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Overdraft Stats -->
    <div class="row mt-4">
      <% const statusList = [
          { key: 'PENDING', label: 'Pending Overdrafts', icon: 'fas fa-clock', color: 'warning' },
          { key: 'APPROVED', label: 'Approved Overdrafts', icon: 'fas fa-check-circle', color: 'primary' },
          { key: 'REJECTED', label: 'Rejected Overdrafts', icon: 'fas fa-times-circle', color: 'danger' },
          { key: 'PAID', label: 'Paid Overdrafts', icon: 'fas fa-money-bill-wave', color: 'secondary' }
        ]; %>

      <% statusList.forEach(status => { %>
      <div class="col-md-3">
        <div class="card card-stats card-round">
          <div class="card-body">
            <div class="row align-items-center">
              <div class="col-icon">
                <div class="icon-big text-center icon-<%= status.color %> bubble-shadow-small">
                  <i class="<%= status.icon %>"></i>
                </div>
              </div>
              <div class="col col-stats ms-3 ms-sm-0">
                <div class="numbers">
                  <p class="card-category"><%= status.label %></p>
                  <h4 class="card-title"><%= overdraftCounts[status.key] || 0 %></h4>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <% }); %>
    </div>
    <% } %>
  </div>
</div>